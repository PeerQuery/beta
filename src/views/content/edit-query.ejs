
<!DOCTYPE html>
<html>
<head>
	
	<!-- Standard Meta -->
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

	<!-- SEO Properties -->
	<title>Edit query - Peer Query</title>
	<meta name="description" content="Outsource a task to the Peer Query community.">
	<meta name="application-name" content="Peer Query">
	
	<!-- Open graph properties -->
	<meta property="og:site_name" content="Peer Query">
	<meta property="og:title" content="Edit query - Peer Query">
	<meta property="og:image" content="https://www.peerquery.com/assets/images/peerquery-home.png"/>
	<meta property="og:description" content="Outsource a task to the Peer Query community.">
	<meta property="fb:app_id" content="384491628645652">
	
	<!-- SEO robots -->
	<meta name="robots" content="noindex, nofollow" />
	
	<link href="/build/dist/styles.css" rel="stylesheet">
	<link href="/build/dist/create_query.css" rel="stylesheet">
	
</head>

<body>



<section class="navbarSection">
	<% include ../partials/navbar.ejs %>
</section>


<div class="ui text container">
	
	<div class="ui feed">
	<div class="event">
	<div class="label">
		<img id="account_img" src="<% if (typeof username == "string" && username) { %> <%= "https://steemitimages.com/u/" + username + "/avatar" %> <% } %>">
	</div>
	<div class="content">
		<div class="summary">
			<a id="user_account"></a>
			<div class="date">
				Edit query
			</div>
		</div>
	</div>
	</div>
	</div>
	
	
	<div class="ui dropdown">
		<i class="sidebar icon"></i>
			<div class="text">More</div>
		<i class="dropdown icon"></i>
		<div class="menu">
			<a class="item" id="" href="/create/report">
				<i class="clipboard icon"></i>
				Report
			</a>
			<a class="item" id="" href="/create/project">
				<i class="coffee icon"></i>
				Project
			</a>
		</div>
	</div>
	
</div>

	<br/>
	
	<div class="ui divider"></div>
	
	<br/><br/>
	
	

<div class="ui text container">
  
	
		    
	  
		<div style="" id="overview">
	
	<form id="form" class="ui loading form">
		
		
			<h4 class="ui dividing header">General</h4>
		
		<div class="field">
			<label>Enter title of your query*</label>
			<input type="text" id="query-title" placeholder="Enter title of query" value="<%= data.title %>">
		</div>
		
		
		<div class="field">
			<label>Enter URL to featured image for your query</label>
			<input type="text" id="queryImage" placeholder="" value="<%= data.image %>" >
		</div>
		
		
		<div class="field">
			<label>Description[Text only 160 characters max]*</label>
			<textarea id="queryDescription" class="limitedText" maxlength="160" rows="2"><%= data.description %></textarea>
		</div>
		
		
		<br/>
		
			<h4 class="ui dividing header">Details</h4>
		
		
		<div class="field">
			<label>Details</label>
			<div id="editor"></div>
		</div>
		
        
        
		
		<div class="two fields">
		
				<div class="field" id="rewardFormField">
					<label>Reward form*</label>
					<select id="queryRewardForm" class="ui fluid dropdown">
						<option value="upvote">Upvote</option>
						<option value="payout">Post payout</option>
						<option value="tokens">Tokens</option>
						<option value="saflt">SAFLT</option>
						<option value="tbd">To be Decided</option>
					</select>
				</div>
			
			
				<div class="field" id="stateField">
					<label>Type*</label>
					<select id="queryType" class="ui fluid dropdown">
						<option value="gig">Gig</option>
						<option value="job">Job</option>
						<option value="partnership">Partnership</option>
					</select>
				</div>
	
		
		</div>
		
		
		<div class="two fields">
	
	
				<div class="field" id="labelField"><label>Label*</label>
					<input type="text" id="queryLabel" name="" placeholder="dev, marketing, authoring, ..." value="<%= data.label %>">
				</div>
				
			
				<div class="field">
				
						<label>Query deadline*</label>
						<div class="ui calendar" id="queryDeadline">
							<div class="ui input left icon">
							<i class="calendar icon"></i>
							<input type="text" placeholder="Date/Time">
						</div>
					
					</div>
			
				</div>
			
		</div>
		
  
		<br/>
		
			<h4 class="ui dividing header">Contact [You will receive messages if left blank]</h4>
		
  
		
		
		
		<div class="three fields">
	
				<div class="field" id="telephoneField"><label>Telephone</label>
					<input type="text" id="queryTelephone" name="" placeholder="+233 555, 65.." value="<%= data.telephone %>">
				</div>
				
				<div class="field" id="emailField"><label>Email</label>
					<input type="text" id="queryEmail" name="" placeholder="bounty@bounty.." value="<%= data.email %>">
				</div>
				
				<div class="field" id="websiteField"><label>Website</label>
					<input type="text" id="queryWebsite" name="" placeholder="https://my-first.." value="<%= data.website %>">
				</div>
				
		</div>
		
		
		
  <br/>
  <br/>
		
		
		
  </form>


		<div class="ui red disabled button" tabindex="0" id="delete">Delete</div>
        
		<div class="ui right floated disabled green floated button" tabindex="0" id="update">Update</div>
		<a class="ui right floated button" href="/query/<%= data.permlink %>" tabindex="0" id="cancel">Cancel</a>
  
	
			<br/>
			
		</div>
        
        
        
        <br/>
        
        <div>
        
            <div class="ui basic modal delete">
                <div class="ui icon header">
                    <i class="cogs icon"></i>
                    Are you sure you want to delete <em><%= data.title %></em>
                </div>
                <div class="content">
                    <p>Remember that you can create another one.</p>
                </div>
                <div class="actions">
                    <div id="deleteBtn" class="ui red inverted button">
                        <i class="trash icon"></i>
                        Delete
                    </div>
                    <div class="ui red basic cancel inverted button">
                        <i class="times icon"></i>
                        Cancel
                    </div>
                </div>
            </div>
            
        </div>
        
    
        
        
		
		<div style="display:none" id="temp"><%- data.body %></div>
		
  
  
</div>  
  
  
	<script src="/build/dist/scripts.js"></script>
	<script src="/build/dist/edit_query.js"></script>
	<script src="/assets/js/semantic-ui-calendar.js"></script>
	<script>
    //
            var type = "<%= data.type %>";
            var permlink = "<%= data.permlink %>";
            var created = new Date("<%= data.created %>");
            var deadline = new Date("<%= data.deadline %>");
            var reward_form = "<%= data.reward_form %>";
            var project_slug_id = "<%= data.project_slug_id %>";
            
            window.onload = function() {
                
                $('.ui.modal').modal();
                
                $('#queryDeadline').calendar('set startDate', created);
                $('#queryDeadline').calendar('set date', deadline);
                
                $('#queryRewardForm').dropdown('set selected', reward_form)
                $('#queryType').dropdown('set selected', type)
                
                
                Editor.setup.setHtml(Editor.setup.convertor.toHTML( $('#temp').html() ));
                
                $('#update').removeClass('disabled');
                $('#delete').removeClass('disabled');
                $('#form').removeClass('loading');
                
                $('#delete').click(function() {
                    //this weird drama is to reset the modal position which is offset by Semantic UI calendar
                    $('.modal.delete').modal('show');
                    $('.modal.delete').modal('hide');
                    $('.modal.delete').modal('show');
                });
                    
            }
                var now = new Date(); now.setDate(now.getDate() + 14);
                window.deadline = deadline;
                $('#queryDeadline').calendar(); var deadline = now;
                $('.ui.calendar').calendar({ onChange: function (date, text) {deadline = text;},});
            
	</script>
	
  
	<section class="footerSection">
		<% include ../partials/footer.ejs %>
	</section>

  
</body>

</html>
